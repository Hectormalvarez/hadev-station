---
# ==============================================================================
# Task: Dotfiles & Shell Configuration
# ==============================================================================

# 1. General Bash Configuration (Aliases & Appearance)
- name: Configure Bash Aliases
  blockinfile:
    path: "{{ ansible_user_dir }}/.bashrc"
    marker: "# {mark} ANSIBLE MANAGED: ALIASES"
    block: |
      # CLI Tool Upgrades
      alias cat='batcat'
      alias ll='ls -alF'
      
      # System Info
      fastfetch

      # FZF Keybindings (Ctrl+R)
      if [ -f /usr/share/doc/fzf/examples/key-bindings.bash ]; then
        source /usr/share/doc/fzf/examples/key-bindings.bash
      fi
  tags: [aliases]

# 2. Pyenv Configuration (Python Version Management)
- name: Configure Pyenv Environment
  blockinfile:
    path: "{{ ansible_user_dir }}/.bashrc"
    marker: "# {mark} ANSIBLE MANAGED: PYENV"
    block: |
      export PYENV_ROOT="$HOME/.pyenv"
      [[ -d $PYENV_ROOT/bin ]] && export PATH="$PYENV_ROOT/bin:$PATH"
      eval "$(pyenv init -)"
      eval "$(pyenv virtualenv-init -)"
  tags: [pyenv_config]

# 3. Git Configuration (Global Identity)
- name: Configure Git Global Identity
  git_config:
    scope: global
    name: "{{ item.key }}"
    value: "{{ item.value }}"
  loop: "{{ git_config }}"
  tags: [git]
